<?xml version="1.0" encoding="UTF-8"?>
<!--

    Copyright 2018 Mike Hummel

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->
<features name="${project.artifactId}-${project.version}"
	xmlns="http://karaf.apache.org/xmlns/features/v1.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://karaf.apache.org/xmlns/features/v1.3.0 http://karaf.apache.org/xmlns/features/v1.3.0">

	<feature name='cherry-reactive-core' description='Reactive Core Bundles' version='${project.version}'>
		<details>${project.description}</details>
		
		<feature>scr</feature>
		<feature>jdbc</feature>
		<feature>openjpa</feature>
		<feature>jndi</feature>
        <feature>activemq-client</feature>
        <feature>shiro-core</feature>

        <!-- felix -->
        <bundle>mvn:org.apache.commons/commons-lang3/${commons-lang3.version}</bundle>
        <!-- 
        <bundle>mvn:org.apache.felix/org.apache.felix.healthcheck.annotation/${felix.healthcheck.annotation.version}</bundle>
         -->
        <bundle>mvn:org.apache.felix/org.apache.felix.healthcheck.api/${felix.healthcheck.api.version}</bundle>
        <bundle>mvn:org.apache.felix/org.apache.felix.healthcheck.core/${felix.healthcheck.core.version}</bundle>
        <bundle>mvn:org.apache.felix/org.apache.felix.healthcheck.generalchecks/${felix.healthcheck.generalchecks.version}</bundle>
        
		<!-- mhu-lib -->

        <bundle>mvn:commons-beanutils/commons-beanutils/${commons-beanutils.version}</bundle><!-- shiro -->
        <bundle>mvn:commons-codec/commons-codec/${commons-codec.version}</bundle>
		<bundle>mvn:org.jsoup/jsoup/${org.jsoup.version}</bundle>
		<bundle>mvn:mysql/mysql-connector-java/${mysql.version}</bundle>
		
		<bundle>mvn:org.apache.commons/commons-jexl/${commons-jexl.version}</bundle>
		<bundle><![CDATA[wrap:mvn:org.w3c.css/sac/${w3c.css.sac}/$Bundle-SymbolicName=sac&Bundle-Version=${w3c.css.sac}&Export-Package=org.w3c.css.sac;version="${w3c.css.sac}",!*]]></bundle>

		<bundle>mvn:org.codehaus.jackson/jackson-core-asl/${jackson.asl.version}</bundle>
		<bundle>mvn:org.codehaus.jackson/jackson-mapper-asl/${jackson.asl.version}</bundle>
		<bundle><![CDATA[wrap:mvn:org.apache.commons/commons-io/${commons-io.version}/$Bundle-SymbolicName=commons-io&Bundle-Version=${commons-io.version}&Export-Package=org.apache.commons.io;version="${commons-io.version}",!*]]></bundle>

		<bundle>mvn:de.mhus.lib/lib-annotations/${mhus-lib.version}</bundle>
		<bundle>mvn:de.mhus.lib/lib-core/${mhus-lib.version}</bundle>
		<bundle>mvn:de.mhus.lib/lib-persistence/${mhus-lib.version}</bundle>
        <bundle>mvn:de.mhus.lib/lib-jms/${mhus-lib.version}</bundle>

		<!-- osgi tools -->
		
		<bundle>mvn:org.bouncycastle/bcprov-jdk16/${bouncycastle.version}</bundle>
        <bundle>mvn:org.apache.httpcomponents/httpcore-osgi/${httpcomponents.httpcore.version}</bundle>
        <bundle>mvn:org.apache.httpcomponents/httpclient-osgi/${httpcomponents.httpclient.version}</bundle>
		
        <bundle>mvn:de.mhus.osgi/osgi-api/${mhus-osgi-tools.version}</bundle>
		<bundle>mvn:de.mhus.osgi/osgi-services/${mhus-osgi-tools.version}</bundle>
		<bundle>mvn:de.mhus.osgi/karaf-commands/${mhus-osgi-tools.version}</bundle>
		<bundle>mvn:de.mhus.osgi/karaf-xdb/${mhus-osgi-tools.version}</bundle>
        <bundle>mvn:de.mhus.osgi/osgi-jms/${mhus-osgi-tools.version}</bundle>

		<bundle>mvn:javax.xml.rpc/javax.xml.rpc-api/${javax.xml.rpc.version}</bundle>
				
		<!-- rest -->
		
		<bundle>mvn:de.mhus.rest/rest-osgi/${mhus-rest.version}</bundle>
        <bundle>mvn:de.mhus.rest/rest-karaf/${mhus-rest.version}</bundle>
		
		<!-- reactive -->
		
		<bundle>mvn:de.mhus.cherry.reactive/reactive-osgi/${cherry-reactive.version}</bundle>
		<bundle>mvn:de.mhus.cherry.reactive/reactive-karaf/${cherry-reactive.version}</bundle>
		
	</feature>
	
	<feature name='cherry-reactive-rest' description='Reactive Rest API' version='${project.version}'>
		<feature>http</feature>
		<feature>http-whiteboard</feature>

		<!-- rest -->
		
        <bundle>mvn:de.mhus.rest/rest-osgi/${mhus-rest.version}</bundle>
        <bundle>mvn:de.mhus.rest/rest-karaf/${mhus-rest.version}</bundle>

        <bundle>mvn:de.mhus.cherry.reactive/reactive-rest/${cherry-reactive.version}</bundle>

	</feature>
	
	<feature name='cherry-reactive-dev' description='Development tools' version='${project.version}'>
		<feature>webconsole</feature>
		<bundle>mvn:org.hsqldb/hsqldb/${hsqldb.version}</bundle>
		
		<feature>cherry-reactive-core</feature>
		
		<bundle>mvn:de.mhus.cherry.reactive/reactive-dev/${cherry-reactive.version}</bundle>
		<bundle>mvn:de.mhus.cherry.reactive/reactive-test/${cherry-reactive.version}</bundle>
		<bundle>mvn:de.mhus.cherry.reactive/cr-example-user-management/${cherry-reactive.version}</bundle>

        <bundle> mvn:org.apache.felix/org.apache.felix.healthcheck.webconsoleplugin/${felix.healthcheck.webconsoleplugin.version}</bundle>
        
	</feature>
	
    <feature name='cherry-reactive-kube' description='User Interface' version='${project.version}'>
        <feature>http</feature>
        <feature>http-whiteboard</feature>
        <bundle>mvn:de.mhus.osgi/health-servlet/${mhus-osgi-servlets.version}</bundle>
    </feature>
    
	<feature name='cherry-reactive-ui' description='User Interface' version='${project.version}'>
		
		<feature>http</feature>
		<feature>http-whiteboard</feature>

		<bundle>mvn:de.mhus.lib/lib-j2ee/${mhus-lib.version}</bundle>
		
        <bundle><![CDATA[wrap:mvn:com.googlecode.gentyref/gentyref/1.2.0/$Bundle-SymbolicName=gentyref&Bundle-Version=1.2.0&Export-Package=com.googlecode.gentyref;version="1.2.0",!*]]></bundle>
        <bundle>mvn:org.jsoup/jsoup/${org.jsoup.version}</bundle>
		<bundle>mvn:de.mhus.ports/vaadin-shared-deps/${mhus-ports-vaadin.version}</bundle>
		<bundle>mvn:com.vaadin/vaadin-compatibility-shared/${vaadin.version}</bundle>
        <bundle>mvn:com.vaadin/vaadin-shared/${vaadin.version}</bundle>
        <bundle>mvn:com.vaadin/vaadin-compatibility-themes/${vaadin.version}</bundle>
        <bundle>mvn:com.vaadin/vaadin-themes/${vaadin.version}</bundle>
		<!-- 
		<bundle>mvn:com.vaadin.external.slf4j/vaadin-slf4j-jdk14/1.6.1</bundle>
		<bundle>mvn:com.vaadin.external.atmosphere/atmosphere-runtime/2.2.9.vaadin2</bundle>
		<bundle>mvn:com.vaadin/vaadin-push/${vaadin.version}</bundle>
		 -->
		
        <bundle>mvn:com.vaadin/vaadin-compatibility-server/${vaadin.version}</bundle>
        <bundle>mvn:com.vaadin/vaadin-server/${vaadin.version}</bundle>
        <bundle>mvn:com.vaadin/vaadin-compatibility-client-compiled/${vaadin.version}</bundle>
        <bundle>mvn:com.vaadin/vaadin-client-compiled/${vaadin.version}</bundle>

		<bundle>mvn:de.mhus.vaadin/vaadin-core/${mhus-vaadin.version}</bundle>
        <bundle>mvn:de.mhus.vaadin/vaadin-osgi-bridge/${mhus-vaadin.version}</bundle>
        <bundle>mvn:de.mhus.vaadin/vaadin-karaf-bridge/${mhus-vaadin.version}</bundle>

		<bundle>mvn:de.mhus.vaadin/vaadin-osgi-theme/${mhus-vaadin.version}</bundle>
		<bundle>mvn:de.mhus.vaadin/vaadin-osgi-desktop/${mhus-vaadin.version}</bundle>

		<bundle>mvn:de.mhus.cherry.reactive/reactive-vaadin-widgets/${cherry-reactive.version}</bundle>
		<bundle>mvn:de.mhus.cherry.reactive/reactive-vaadin-core/${cherry-reactive.version}</bundle>
	
	</feature>	
	
	<feature name='cherry-reactive-all' description='Install all expect dev' version='${project.version}'>
		<feature>cherry-reactive-core</feature>
		<feature>cherry-reactive-rest</feature>
        <feature>cherry-reactive-kube</feature>
		<feature>cherry-reactive-ui</feature>
	</feature>
	
</features>